<ng-container *transloco="let t">
<div class="host" *ngIf="userService.currentUser; else noUser">
<ng-container *ngIf="userService.data; let data">
<ng-container *ngIf="userService.publicData; let publicData">

  <div class="head">

    <div class="cover" [style.background-image]="!data.coverPhoto ? null : 'url(' + data.coverPhoto + ')'">
      <button class="button-dark">
        <nguix-icon base="icon-light" name="arrow-up-circle-fill" size="24"></nguix-icon>
      </button>
    </div>

    <div class="content">
      <div class="avatar">
        <img [src]="data.photoURL" [alt]="data.displayName">
        <button class="edit button"><nguix-icon name="arrow-up-circle-fill" size="16"></nguix-icon></button>
      </div>
      <div class="info">
        <h3 class="name">
          <strong class="truncate">{{ data.displayName }}</strong>
          <button class="edit button-clear"><nguix-icon name="pencil-square" size="16"></nguix-icon></button>
        </h3>
        <div class="email">
          <em>{{ data.email }}</em>
          <!-- <a *ngIf="!data.emailVerified" href="#" (click)="false;">Verify email</a> -->
        </div>
      </div>
      <div class="public" *ngIf="data.username">
        <a class="button-primary" [usefulRouterLink]="[data.username]">Public Profile</a>
      </div>
    </div>

  </div>

  <div class="body">

    <ul class="general">
      <li class="title">General</li>

      <li class="publicly">
        <div class="label">Publicly</div>
        <div class="value">
          <label class="form-switch">
            <input
              type="checkbox"
              [checked]="publicData.status==='publish'"
            />
            <span class="slider"></span>
          </label>
        </div>
      </li>

      <li class="intro">
        <nguix-account-text-editor
          [i18n]="i18n"
          label="Intro"
          type="text"
          [value]="data.intro"
          (save)="updateIntro($event)"
        ></nguix-account-text-editor>
      </li>

      <li class="email">
        <nguix-account-text-editor
          [i18n]="i18n"
          label="Email"
          [value]="data.email"
          [editable]="false"
          [showPubliclyToggler]="true"
          (publiclyChanged)="updateEmailPublicly($event)"
        ></nguix-account-text-editor>
      </li>

    </ul>

  </div>
  
  <div class="foot">
    <button class="button-outline" (click)="signOut()">{{ !i18n ? logoutText : t('NGUIX_ACCOUNT.LOGOUT_TEXT') || logoutText }}</button>
  </div>

</ng-container>
</ng-container>
</div>

<ng-template #noUser>
  <p>No signed in user!</p>
</ng-template>

</ng-container>
